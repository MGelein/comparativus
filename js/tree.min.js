var w=900;var h=300;var textMargins={top:20,left:0,bottom:70,right:0};var color=d3.scaleOrdinal(d3.schemeCategory10);var svg=d3.select(".svg-canvas");$(".svg-canvas").hide();function createVisualization(a){$(".svg-canvas").show();d3.json(a,function(c,e){var o={};var e=a;var j=svg.append("g").classed("text-holder",true);j.selectAll("rect").data(e.texts).enter().append("rect").attr("x",0).attr("y",function(q,p){return(p>0)?h-textMargins.bottom:textMargins.top}).attr("width",w).attr("height",50);j.selectAll("texts").data(e.texts).enter().append("text").attr("x",0).attr("y",function(q,p){return(p>0)?h-5:15}).text(function(p){o[p.name]=p.textLength;return p.name+" : "+p.textLength+" characters compared."});var m=svg.append("g").classed("node-holder",true);m.selectAll("rect").data(e.nodes).enter().append("rect").attr("y",function(p){return(p.group==0)?h-70:20}).attr("x",function(p){return(p.index/o[(p.group==0)?"Mencius":"ZGZY"])*w}).attr("width",function(p){return g(p.l,p.group)}).attr("height",50).on("mouseover",function(q){d3.select(this).attr("width",function(r){return g(r.l,r.group)*2});var p=n(e,q.id);p.forEach(function(s,r){})}).on("mouseout",function(p){d3.select(this).attr("width",function(q){return g(q.l,q.group)})});var b=svg.append("g").classed("link-holder",true);b.selectAll("path").data(e.links).enter().append("path").attr("stroke-width",function(p){g(p.l,0)}).attr("d",function(p){return f(e,p.source,p.target)});function f(s,r,q){var p="M "+l(s,r)+","+k(s,r);p+=" C "+l(s,r)+","+h/2;p+=" "+l(s,q)+","+h/2;p+=" "+l(s,q)+","+k(s,q);return p}function i(r,s){var q=0;var p;do{p=r.nodes[q];q++}while(p.id!=s);if(p.id==s){return p}}function n(s,t){var r=0;var p;var q=[];do{p=s.links[r];if(p.source==t||p.target==t){q.push(p)}r++}while(r<s.links.length);return q}function l(p,q){d=i(p,q);return(d.index/o[(d.group==0)?"Mencius":"ZGZY"])*w}function k(p,q){d=i(p,q);return(d.group!=0)?70:h-70}function g(q,r){var p=(q/o[(r==0)?"Mencius":"ZGZY"])*w;return Math.max(2,p)}})};