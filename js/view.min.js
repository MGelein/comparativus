var svg=d3.select("svg"),width=+svg.attr("width"),height=+svg.attr("height");var color=d3.scaleOrdinal(d3.schemeCategory10);var simulation=d3.forceSimulation().force("link",d3.forceLink().id(function(a){return a.id})).force("charge",d3.forceManyBody().strength(-10)).force("center",d3.forceCenter(width/2,height/2));d3.json("data/Matches-Mencius-ZGZY.json",function(b,e){if(b){throw b}var d=svg.append("g").attr("class","links").selectAll("line").data(e.links).enter().append("line").attr("stroke-width",1);var c=svg.append("g").attr("class","nodes").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",5).attr("fill",function(f){return color(f.group)}).call(d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended));c.append("title").text(function(f){return f.text});simulation.nodes(e.nodes).on("tick",a);simulation.force("link").links(e.links);function a(){d.attr("x1",function(f){return f.source.x}).attr("y1",function(f){return f.source.y}).attr("x2",function(f){return f.target.x}).attr("y2",function(f){return f.target.y});c.attr("cx",function(f){return f.x}).attr("cy",function(f){return f.y})}});function dragstarted(a){if(!d3.event.active){simulation.alphaTarget(0.3).restart()}a.fx=a.x;a.fy=a.y}function dragged(a){a.fx=d3.event.x;a.fy=d3.event.y}function dragended(a){if(!d3.event.active){simulation.alphaTarget(0)}a.fx=null;a.fy=null};